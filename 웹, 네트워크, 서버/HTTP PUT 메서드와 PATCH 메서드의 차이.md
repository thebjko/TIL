---
created_at : 2023-04-25, Tue
유효기록일 : 2023-04-25, Tue
topics : 
context : rest_api 
tags : rest_api http 멱등성 idempotent
related : 
---
# PUT
리소스의 모든 것을 업데이트한다.

<br>

# PATCH
리소스의 일부를 업데이트한다

<br>

# 예시

이름, 나이, 성별이라는 필드를 가진 레코드(리소스)가 있다고 하자.
1. PUT으로 `{name: '킬복순'}`이라고 보내면 이름은 업데이트 되지만 나이와 성별 필드에 있던 데이터가 사라진다.
2. 반면, PATCH로 같은 메서드를 보내면 다른 필드는 유지된 채로 이름만 업데이트된다.

<br>

# 멱등성
📝 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질, 연산을 여러 번 반복하여도 한 번만 수행된 것과 같은 성질

예를 들어 `abs` 함수가 멱등성을 지닌다.
```python
abs(abs(x)) == abs(x)   # True
```

또 다른 예로, 파이썬 set의 discard 메서드가 있다. 이 메서드는 set 내에 버리려는 원소가 있으면 제거하고, 없으면 아무 작업을 수행하지 않는다. 따라서 이 메서드를 한번 수행하나 두번 수행하나 결과는 같다.
```python
# 한번 수행한 것과 결과가 같다.
my_set.discard(x)
my_set.discard(x)
```

따라서 discard 메서드는 멱등성을 지닌다.

멱등 연산은 작업 수행 요청이 최소 한 번 발생하도록 보장되지만 두 번 이상 발생할 수도 있는 네트워크 프로토콜 설계에 자주 사용된다. 작업이 멱등적이면 작업을 두 번 이상 수행해도 결과는 한 번만 수행된 것과 동일하기 때문에 문제가 없기 때문이다.

멱등성은 REST에서 중요한 역할을 한다. REST 리소스 표현을 GET하고(예: Flickr에서 jpeg 이미지 가져오기) 작업이 실패하면 작업이 성공할 때까지 GET을 계속해서 반복할 수 있다. 웹 서비스의 경우 이미지를 몇 번 가져왔는지는 중요하지 않다. 마찬가지로 RESTful 웹 서비스를 사용하여 Twitter 계정 정보를 업데이트하는 경우 웹 서비스에서 확인을 받기 위해 필요한 만큼 새 정보를 PUT 할 수 있다. 천 번 PUT 하는 것은 한 번 PUT 하는 것과 같다. 마찬가지로 REST 리소스를 천 번 DELETE하는 것은 한 번 DELETE하는 것과 같다. 따라서 멱등성을 사용하면 통신 오류에 탄력적인 웹 서비스를 훨씬 쉽게 구성할 수 있다.
ㄱ
<br>

---
# 참고자료
- https://programmer93.tistory.com/39
- https://june0122.github.io/2021/08/05/term-idempotent/

[^1]: