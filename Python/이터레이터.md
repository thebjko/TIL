---
created_at : 2023-04-12, Wed
ìœ íš¨ê¸°ë¡ì¼ : 2023-04-12, Wed
topics : 
context : zip, ManyToOneRelationship Django í”„ë¡œì íŠ¸
tags : python/objects
related : zip, iter, next
---
# ì´í„°ë ˆì´í„°
ğŸ“ ê°’ì„ í•˜ë‚˜ì”© êº¼ë‚´ëŠ” ê°ì²´. í•œë²ˆì— ë‹¤ ë§Œë“¤ì–´ ë†“ì§€ ì•Šìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ë†’ì¸ë‹¤.

- dir í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ `__iter__` ë©”ì„œë“œ í™•ì¸. ë“¤ì–´ìˆë‹¤ë©´ ì´í„°ëŸ¬ë¸”ì´ë‹¤. 

	```python
	>>> it = [1, 2, 3].__iter__()   # ë¦¬ìŠ¤íŠ¸ì˜ ì´í„°ë ˆì´í„°ë¥¼ itì— ì €ì¥
	>>> it.__next__()               # next ë©”ì„œë“œë¡œ ì¶œë ¥ í™•ì¸
	1
	>>> it.__next__()
	2
	>>> it.__next__()
	3
	>>> it.__next__()   # ì†Œì§„ë  ê²½ìš° StopIteration ì˜ˆì™¸ë¥¼ ë°œìƒ
	Traceback (most recent call last):
	  File "<pyshell#48>", line 1, in <module>
	    it.__next__()
	StopIteration
	```

ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ì—ì„œ `__iter__` ë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ ì´í„°ëŸ¬ë¸”ì„ ì–»ëŠ”ë‹¤.

<br>

## ì´í„°ë ˆì´í„° ë§Œë“¤ê¸°
`__iter__` ë©”ì„œë“œì™€ `__next__` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•œë‹¤

```python
class Counter:
    def __init__(self, stop):
        self.current = 0    # í˜„ì¬ ìˆ«ì ìœ ì§€, 0ë¶€í„° ì§€ì •ëœ ìˆ«ì ì§ì „ê¹Œì§€ ë°˜ë³µ
        self.stop = stop    # ë°˜ë³µì„ ëë‚¼ ìˆ«ì
 
    def __iter__(self):
        return self         # í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜
 
    def __next__(self):
        if self.current < self.stop:    # í˜„ì¬ ìˆ«ìê°€ ë°˜ë³µì„ ëë‚¼ ìˆ«ìë³´ë‹¤ ì‘ì„ ë•Œ
            r = self.current            # ë°˜í™˜í•  ìˆ«ìë¥¼ ë³€ìˆ˜ì— ì €ì¥
            self.current += 1           # í˜„ì¬ ìˆ«ìë¥¼ 1 ì¦ê°€ì‹œí‚´
            return r                    # ìˆ«ìë¥¼ ë°˜í™˜
        else:                           # í˜„ì¬ ìˆ«ìê°€ ë°˜ë³µì„ ëë‚¼ ìˆ«ìë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ ë•Œ
            raise StopIteration         # ì˜ˆì™¸ ë°œìƒ
 
for i in Counter(3):
    print(i, end=' ')
```

^c301b2

<br>

`__getitem__` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´í„°ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.[^1]
```Python
class Counter:
    def __init__(self, stop):
        self.stop = stop
 
    def __getitem__(self, index):
        if index < self.stop:
            return index
        else:
            raise IndexError
 
print(Counter(3)[0], Counter(3)[1], Counter(3)[2])
 
for i in Counter(3):
    print(i, end=' ')
```

<br>

# ì´í„°ë ˆì´í„° ì˜ˆì‹œ - zip ê°ì²´

views.py
```python
def test(request):
    context = {
        'list': list(range(100)),
        'zip': zip(range(100), range(99, 0, -1)),
    }
    return render(request, 'reviews/test.html', context)
```

test.html
```django
{% extends 'base.html' %}

{% block content %}
<h1>List: First Loop</h1>
{% for i in list %}
  {{i}}
{% endfor %}

<h1>List: Second Loop</h1>
{% for i in list %}
  {{i}}
{% endfor %}

<h1>Zip: First Loop</h1>
{% for i, j in zip %}
  {{ i }} {{ j }}
{% endfor %}

<h1>Zip: Second Loop</h1>
{% for i, j in zip %}
  {{ i }} {{ j }}
{% endfor %}
{% endblock content %}
```

ì¶œë ¥:
```text
List: First Loop
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
List: Second Loop
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
Zip: First Loop
0 99 1 98 2 97 3 96 4 95 5 94 6 93 7 92 8 91 9 90 10 89 11 88 12 87 13 86 14 85 15 84 16 83 17 82 18 81 19 80 20 79 21 78 22 77 23 76 24 75 25 74 26 73 27 72 28 71 29 70 30 69 31 68 32 67 33 66 34 65 35 64 36 63 37 62 38 61 39 60 40 59 41 58 42 57 43 56 44 55 45 54 46 53 47 52 48 51 49 50 50 49 51 48 52 47 53 46 54 45 55 44 56 43 57 42 58 41 59 40 60 39 61 38 62 37 63 36 64 35 65 34 66 33 67 32 68 31 69 30 70 29 71 28 72 27 73 26 74 25 75 24 76 23 77 22 78 21 79 20 80 19 81 18 82 17 83 16 84 15 85 14 86 13 87 12 88 11 89 10 90 9 91 8 92 7 93 6 94 5 95 4 96 3 97 2 98 1
Zip: Second Loop
```
> ë¦¬ìŠ¤íŠ¸ëŠ” 2ë²ˆ ìˆœíšŒë˜ì—ˆì§€ë§Œ [[zip í•¨ìˆ˜|ì´í„°ë ˆì´í„°ì¸ zip ê°ì²´]]ëŠ” forë¬¸ì„ ë‘ë²ˆ ì‹¤í–‰í–ˆìŒì—ë„ í•œë²ˆë§Œ ìˆœíšŒë˜ì—ˆë‹¤.

```python
>>> a = [*range(10)]
>>> b = range(10)
>>> b
range(0, 10)
>>> dir(b)
['__bool__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__reversed__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'count', 'index', 'start', 'step', 'stop']
>>> it = b.__iter__()   # rangeëŠ” immutable sequence íƒ€ì… -> ë©”ì„œë“œ í˜¸ì¶œë¡œ ì´í„°ë ˆì´í„° ìƒì„±
>>> it
<range_iterator object at 0x1008f7960>
>>> for i in a:
...     print(i, end=' ')
...
0 1 2 3 4 5 6 7 8 9 
>>> for i in a:
...     print(i, end=' ')
...
0 1 2 3 4 5 6 7 8 9 
>>> for i in it:
...     print(i, end=' ')
...
0 1 2 3 4 5 6 7 8 9 
>>> for i in it:
...     print(i, end=' ')
...
>>>
```
<br>

---
# ì°¸ê³ ìë£Œ
- https://dojang.io/mod/page/view.php?id=2405
- https://docs.python.org/3/library/functions.html#func-range

[^1]: https://dojang.io/mod/page/view.php?id=2407