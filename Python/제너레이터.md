---
created_at : 2023-04-12, Wed
ìœ íš¨ê¸°ë¡ì¼ : 2023-04-12, Wed
topics : 
context : 
tags : python python/algorithm/merge_sort
related : merge sort
---
# ì œë„ˆë ˆì´í„°
ğŸ“ ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•´ì£¼ëŠ” í•¨ìˆ˜. ë°œìƒìë¼ê³ ë„ í•œë‹¤.

- í•¨ìˆ˜ í˜¸ì¶œì‹œ generator ê°ì²´ê°€ ë°˜í™˜ëœë‹¤. `__iter__`, `__next__` ë©”ì„œë“œë¥¼ ê°–ê³  ìˆë‹¤.
- yield í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ê°’ì„ í•˜ë‚˜ì”© ë°˜í™˜í•˜ë©´ì„œ ì†Œì§„ë˜ë©´ StopIteration ì˜ˆì™¸ê°€ ìë™ìœ¼ë¡œ ë°œìƒí•œë‹¤. [[ì´í„°ë ˆì´í„°]]ëŠ” ì§ì ‘ ë°œìƒì‹œì¼œì•¼ í–ˆë‹¤. 
- `return` í‚¤ì›Œë“œë¡œ í•¨ìˆ˜ ì¢…ë£Œì‹œì—ë„ StopIteration ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.
- ì œë„ˆë ˆì´í„°ì— `next()` í•¨ìˆ˜ (ë˜ëŠ” `__next__` ë©”ì„œë“œ)ë¥¼ ì‚¬ìš©í•´ ê°’ì„ í•˜ë‚˜ì”© ë¶ˆëŸ¬ì˜¤ë©°, ì œë„ˆë ˆì´í„°ëŠ” ë‹¤ìŒë²ˆ `next()` ì‹¤í–‰ì‹œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.

<br>

## ì œë„ˆë ˆì´í„° ë§Œë“¤ê¸°
```python
def number_generator(stop):
    n = 0              # ìˆ«ìëŠ” 0ë¶€í„° ì‹œì‘
    while n < stop:    # í˜„ì¬ ìˆ«ìê°€ ë°˜ë³µì„ ëë‚¼ ìˆ«ìë³´ë‹¤ ì‘ì„ ë•Œ ë°˜ë³µ
        yield n        # í˜„ì¬ ìˆ«ìë¥¼ ë°”ê¹¥ìœ¼ë¡œ ì „ë‹¬
        n += 1         # í˜„ì¬ ìˆ«ìë¥¼ ì¦ê°€ì‹œí‚´
 
for i in number_generator(3):
    print(i)
```
[[ì´í„°ë ˆì´í„°#^c301b2|ì´í„°ë ˆì´í„°ë¡œ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œì™€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ ëˆˆì—¬ê²¨ë³´ì.]] 

<br>

## yieldì—ì„œ í•¨ìˆ˜ í˜¸ì¶œí•˜ê¸°
```python
def upper_generator(x):
    for i in x:
        yield i.upper()    # í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì„ ë°”ê¹¥ìœ¼ë¡œ ì „ë‹¬
 
fruits = ['apple', 'pear', 'grape', 'pineapple', 'orange']
for i in upper_generator(fruits):
    print(i)
```
return í‚¤ì›Œë“œì™€ ìœ ì‚¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

## yield from
ì•„ë˜ì˜ ë‘ ì½”ë“œëŠ” ê¸°ëŠ¥ì ì¸ ì¸¡ë©´ì—ì„œ ë™ì¼í•˜ë‹¤:
```python
def number_generator():
    x = [1, 2, 3]
    for i in x:
        yield i
 
for i in number_generator():
    print(i)
```
```python
def number_generator():
    x = [1, 2, 3]
    yield from x    # ë¦¬ìŠ¤íŠ¸ì— ë“¤ì–´ìˆëŠ” ìš”ì†Œë¥¼ í•œ ê°œì”© ë°”ê¹¥ìœ¼ë¡œ ì „ë‹¬
 
for i in number_generator():
    print(i)
```

<br>

## yield fromì— ì œë„ˆë ˆì´í„° ê°ì²´ ì§€ì •í•˜ê¸°
ì œë„ˆë ˆì´í„° ë˜í•œ ì´í„°ëŸ¬ë¸”ì²˜ëŸ¼ ë™ì‘í•˜ë¯€ë¡œ(`__iter__`, `__next__`) ìœ„ ì½”ë“œ `x`ì˜ ìë¦¬ì— ì œë„ˆë ˆì´í„°ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤.
```python
def number_generator(stop):
    n = 0
    while n < stop:
        yield n
        n += 1
 
def three_generator():
    yield from number_generator(3)    # ìˆ«ìë¥¼ ì„¸ ë²ˆ ë°”ê¹¥ìœ¼ë¡œ ì „ë‹¬
 
for i in three_generator():
    print(i)
```

<br>

ğŸ“ Generator Expression  
ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ì‹ì„ ê´„í˜¸ë¡œ ë¬¶ì–´ ì œë„ˆë ˆì´í„°ë¥¼ ë§Œë“¤ìˆ˜ë„ ìˆë‹¤:
```python
>>> x=(n*2 for n in range(10))
>>> type(x)
<class 'generator'>
>>> x
<generator object <genexpr> at 0x000002AA7DBD7648>

>>> next(x)
0
>>> next(x)
2
>>> next(x)
4
```
ê°’ì„ í•˜ë‚˜ì”© ìƒì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.

<br>

# ë³‘í•© ì •ë ¬[^1]
ì´ì œ ë³‘í•© ì •ë ¬ì— ë„ì „í•´ë³´ì.
```python
def merge_sort(collection: list) -> list:
    def merge(left: list, right: list) -> list:
        def _merge():
            while left and right:
                yield (left if left[0] <= right[0] else right).pop(0)
            yield from left
            yield from right

        return list(_merge())

    if len(collection) <= 1:
        return collection
    mid = len(collection) // 2
    return merge(merge_sort(collection[:mid]), merge_sort(collection[mid:]))
```

ì •ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í’€ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ë‹¤(ìµœì†Œí•œ ê¸°ëŠ¥ì ì¸ ì¸¡ë©´ì—ì„œ):

```python
def merge(left: list, right: list) -> list:
    def _merge():
		while left and right:
			yield (left if left[0] <= right[0] else right).pop(0)
		yield from left
		yield from right
    
    return list(_merge())


def merge_sort(collection: list) -> list:
    if len(collection) <= 1:
        return collection
    mid = len(collection) // 2
    return merge(merge_sort(collection[:mid]), merge_sort(collection[mid:]))
```

ë§¨ ì•„ë˜ í•¨ìˆ˜ê°€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì„œ ì •ë ¬ì„ ìˆ˜í–‰í•˜ëŠ” ì£¼ í•¨ìˆ˜ì´ë‹¤. ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜ìœ¼ë¡œ ë‚˜ëˆ  ì¬ê·€í•˜ê³  ì´ì— ëŒ€í•´ `merge` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤. ì œë„ˆë ˆì´í„°ë¥¼ ìƒì„±í•˜ëŠ” `_merge()` í•¨ìˆ˜ë¥¼ ë°›ì•„ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“œëŠ” í•¨ìˆ˜ë‹¤. `merge` í•¨ìˆ˜ì˜ ë‘ ì¸ìˆ˜ë¥¼ ë°›ì•„ ì–‘ìª½ì— ì›ì†Œê°€ ì¡´ì¬í•˜ëŠ”ë™ì•ˆ(while) ì–‘ ìª½ì˜ ë§¨ ì• ì›ì†Œë¥¼ ë¹„êµí•´ ì ì€ ê°’ì„ yieldí•˜ê³ , í•œìª½ì´ ë¹ˆë‹¤ë©´ ì–‘ìª½ì—ì„œ yieldë¥¼ ë°›ëŠ”ë‹¤. `next()`ëŠ” StopIteration ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ë‹ˆ yield fromìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. (**yieldëŠ” ê°’, yield fromì€ ì´í„°ëŸ¬ë¸” ê°ì²´.**)

```python
>>> x = (i for i in range(3))
>>> x.__next__
<method-wrapper '__next__' of generator object at 0x100e01e50>
>>> next(x)
0
>>> x.__next__()
1
>>> x.__next__()
2
>>> def numbers():
...    yield from x
...
>>> for i in numbers():
...     print(i)
...
>>>
```
ì´ë ‡ê²Œ yieldëœ ê°’ì„ ëª¨ì•„ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì–´ í•©ì¹˜ëŠ” ì •ë ¬ì´ë‹¤.

<br>

---
# ì°¸ê³ ìë£Œ
- https://dojang.io/mod/page/view.php?id=2412
- https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement
- https://docs.python.org/3/reference/expressions.html#yield-expressions
- https://www.agiliq.com/blog/2017/11/how-python-generators-are-similar-iterators/#:~:text=Generators%20are%20functions%20having%20an,and%20with%20a%20for%20loop
- https://stackoverflow.com/questions/30096351/are-list-comprehensions-syntactic-sugar-for-listgenerator-expression-in-pyth
- https://minjoos.tistory.com/3

[^1]: https://github.com/TheAlgorithms/Python/blob/master/sorts/merge_sort.py